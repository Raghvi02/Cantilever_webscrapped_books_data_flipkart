from selenium import webdriver
from selenium.webdriver.chrome.service import Service
from selenium.webdriver.common.by import By
import time

chrome_driver_path = 'C:/Users/Raghv/Downloads/chromedriver-win32 (1)/chromedriver-win32/chromedriver.exe'

# Create a Service object
s = Service(chrome_driver_path)

# Initialize the WebDriver correctly
driver = webdriver.Chrome(service=s)


driver.get('https://www.flipkart.com/books/lifestyle-hobby-and-sport-books/pr?sid=bks,wcr&p[]=facets.serviceability%5B%5D%3Dtrue&otracker=clp_banner_2_38.bannerX3.BANNER_books-store_14Y78KE6J2ZC&fm=neo%2Fmerchandising&iid=M_d9ac4002-b290-42af-8b86-48d39e8103d2_38.14Y78KE6J2ZC&ppt=clp&ppn=the-childrenandteens-store&ssid=5nxqpnwjv40000001721934265899')
time.sleep(5)
old_height= driver.execute_script('return document.body.scrollHeight')
while True:
    new_height = driver.execute_script('return document.body.scrollHeight')
    if new_height == old_height:
        break
    old_height= new_height
    
html = driver.page_source
with open('books.html','w',encoding='utf-8') as f:
    f.write(html)